<!DOCTYPE html>
<html>
<head>
  <title>Submission List</title>
  <link href="/static/css/styles.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
</head>
<body>

<a href="/" class="btn btn-purple btn-small margin-bottom-20 inline">Back To Landing Page</a>

<div style="margin-top: 25px; font-size: 14px;">
  <table border="1" cellpadding="6" cellspacing="0">
    <thead>
      <tr>
        <th>Item ID</th>
        <th>Item</th>
        <th>Set</th>
        <th>Language</th>
        <th>Type</th>
        <th>Sub #</th>
        <th>Company</th>
        <th>Cert</th>
        <th>Grade</th>
        <th>Cost</th>
        <th>Grade Fee</th>
        <th>Received</th>
        <th>Net</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for submission in submissions %}
        {% set cost = submission.purchase_price + submission.import_fee %}
        {% set net = submission.return_jpy - cost - submission.grading_fee if submission.return_jpy is not none else none %}
        <tr class="{% if submission.is_cracked %}
                    yellow
                  {% elif submission.return_jpy is not none %}
                    gray
                  {% endif %}">
          <td>{{ submission.item_id }}</td>
          <td>{{ submission.name }}</td>
          <td>{{ submission.set_name }}</td>
          <td>{{ submission.language }}</td>
          <td>{{ submission.category }}</td>
          <td class="centre-aligned">{{ submission.submission_number }}</td>
          <td>{{ submission.submission_company }}</td>
          <td class="centre-aligned {{ 'faint' if submission.grade is none else '' }}">{{ submission.cert }}</td>
          <td class="centre-aligned {{ 'faint' if submission.grade is none else '' }}">
              {% if submission.grade is none %}
                ''
              {% elif submission.grade == submission.grade|int %}
                {{ submission.grade|int }}
              {% else %}
                {{ submission.grade }}
              {% endif %}
          </td>
          <td class="right-aligned">{{ '짜' ~ '{:,.0f}'.format(cost) }}</td>
          <td class="right-aligned {{ 'faint' if submission.grading_fee is none else '' }}">
            {{ '' if submission.grading_fee is none else '짜' ~ '{:,.0f}'.format(submission.grading_fee) }}
          </td>
          <td class="right-aligned {{ 'faint' if submission.return_jpy is none else '' }}">
            {{ '' if submission.return_jpy is none else '짜' ~ '{:,.0f}'.format(submission.return_jpy) }}
          </td>
          <td class="right-aligned
                    {% if net is none %}
                      faint
                    {% elif net > 0 %}
                      green
                    {% endif %}">
            {{ '' if submission.return_jpy is none else '짜' ~ '{:,.0f}'.format(net) }}
          </td>
          <td>
            <a href="/submissions_delete/{{ submission.id }}"
                    onclick="return confirm('Are you sure you want to delete this submission?')"
                    style="color: red; margin-right: 10px;">
              Del
            </a>
            <a href="/submissions_edit/{{ submission.id }}" style="color: purple;">
              Edit
            </a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% if not submissions %}
  <p>No submissions found.</p>
{% endif %}

</body>
</html>
